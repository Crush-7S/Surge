mixed-port: 7890
allow-lan: false
bind-address: '*'
mode: rule
log-level: info
ipv6: false
external-controller: 127.0.0.1:9090
hosts:
  'mtalk.google.com': 108.177.125.188
  'dl.google.com': 180.163.151.161
  'dl.l.google.com': 180.163.151.161
dns:
  enable: false
  listen: 0.0.0.0:53
  default-nameserver:
  - 119.29.29.29
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
  - '*.lan'
  - localhost.ptlogin2.qq.com
  - '+.srv.nintendo.net'
  - '+.stun.playstation.net'
  - '+.msftconnecttest.com'
  - '+.msftncsi.com'
  - '+.xboxlive.com'
  - 'msftconnecttest.com'
  - 'xbox.*.microsoft.com'
  - '*.battlenet.com.cn'
  - '*.battlenet.com'
  - '*.blzstatic.cn'
  - '*.battle.net'
  nameserver:
  - 119.29.29.29
proxies:
proxy-providers:
  Auto:
    type: http
    url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
    interval: 3600
    path: ./Auto.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  HK:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 港|HK|(?i)Hong
  TW:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 台湾|TW|(?i)Taiwan
  KR:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 韩|首尔|KR|(?i)Korea
  SG:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 新加坡|SG|(?i)Singapore
  JP:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 日本|东京|JP|(?i)Japan
  US:
    <<:
      type: http
      url: "https://api.v1.mk/sub?target=clash&url=https://gist.githubusercontent.com/Crush-7S/8a553f848622384d7b4b06a21abbdee9/raw/Clash&list=true&udp=true"
      interval: 3600
      path: ./Auto.yaml
      health-check:
        enable: true
        interval: 600
        url: http://www.gstatic.com/generate_204
    filter: 美国|US|(?i)States|American
proxy-groups:
- name: Proxy
  type: select
  proxies:
  - HK
  - TW
  - SG
  - JP
  - US
  - KR
- name: Auto
  type: url-test
  use:
  - Auto
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: BiliBili
  type: select
  proxies:
  - DIRECT
  - HK
  - TW
- name: Telegram
  type: select
  proxies:
  - HK
  - TW
  - KR
  - SG
  - JP
  - US
- name: Twitter
  type: select
  proxies:
  - HK
  - TW
  - KR
  - SG
  - JP
  - US
- name: TikTok
  type: select
  proxies:
  - TW
  - KR
  - SG
  - JP
  - US
- name: YouTube
  type: select
  proxies:
  - HK
  - TW
  - KR
  - SG
  - JP
  - US
- name: Netflix
  type: select
  proxies:
  - HK
  - TW
  - KR
  - SG
  - JP
  - US
- name: Disney
  type: select
  proxies:
  - HK
  - TW
  - KR
  - SG
  - JP
  - US
- name: Google
  type: select
  proxies:
  - Proxy
  - DIRECT
- name: Microsoft
  type: select
  proxies:
  - DIRECT
  - Proxy
- name: Game
  type: select
  proxies:
  - DIRECT
  - Proxy
- name: Apple
  type: select
  proxies:
  - DIRECT
  - Proxy
- name: Speedtest
  type: select
  proxies:
  - DIRECT
  - Proxy
- name: Final
  type: select
  proxies:
  - DIRECT
  - Proxy
- name: HK
  type: url-test
  use:
  - HK
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: TW
  type: url-test
  use:
  - TW
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: KR
  type: url-test
  use:
  - KR
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: SG
  type: url-test
  use:
  - SG
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: JP
  type: url-test
  use:
  - JP
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
- name: US
  type: url-test
  use:
  - US
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  proxies: []
rule-providers:
  Unbreak:
    type: http
    behavior: classical
    path: ./RuleSet/Unbreak.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/Unbreak.yaml
    interval: 86400
  Advertising:
    type: http
    behavior: domain
    path: ./rule/Clash/AdvertisingLite/AdvertisingLite_Classical.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AdvertisingLite/AdvertisingLite_Classical.yaml
    interval: 86400
  Hijacking:
    type: http
    behavior: classical
    path: ./RuleSet/Guard/Hijacking.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/Guard/Hijacking.yaml
    interval: 86400
  Privacy:
    type: http
    behavior: classical
    path: ./RuleSet/Guard/Privacy.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/Guard/Privacy.yaml
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    path: ./RuleSet/Extra/Telegram/Telegram.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master//Clash/RuleSet/Extra/Telegram/Telegram.yaml
    interval: 86400
  Twitter:
    type: http
    behavior: classical
    path: ./rule/Clash/Twitter/Twitter.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml
    interval: 86400
  TikTok:
    type: http
    behavior: classical
    path: ./rule/Clash/TikTok/TikTok.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/TikTok/TikTok.yaml
    interval: 86400
  YouTube:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml
    path: ./rule/Clash/YouTube/YouTube.yaml
    interval: 86400
  Netflix:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml
    path: ./rule/Clash/Netflix/Netflix.yaml
    interval: 86400
  Disney:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.yaml"
    path: ./rule/Clash/Disney/Disney.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./rule/Clash/Microsoft/Microsoft.yaml
    interval: 86400
  Streaming:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/Streaming.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400
  Google:
    type: http
    behavior: classical
    path: ./rule/Clash/Google/Google.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    interval: 86400
  BiliBili:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/StreamingSE.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/StreamingMedia/StreamingSE.yaml
    interval: 86400
  Global:
    type: http
    behavior: classical
    path: ./rule/Clash/Global/Global_Classical.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global_Classical.yaml
    interval: 86400
  China:
    type: http
    behavior: classical
    path: ./RuleSet/China.yaml
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/China.yaml
    interval: 86400
  Apple:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml
    path: ./rule/Clash/Apple/Apple.yaml
    interval: 86400
  Speedtest:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Speedtest/Speedtest.yaml"
    path: ./rule/Clash/Speedtest/Speedtest.yaml
    interval: 86400
rules:

- RULE-SET,Unbreak,DIRECT
- RULE-SET,Advertising,REJECT
- RULE-SET,Hijacking,REJECT
- RULE-SET,Privacy,REJECT
- RULE-SET,BiliBili,BiliBili
- RULE-SET,Streaming,Proxy
- RULE-SET,Telegram,Telegram
- RULE-SET,Twitter,Twitter
- RULE-SET,Google,Google
- RULE-SET,TikTok,TikTok
- RULE-SET,Netflix,Netflix
- RULE-SET,Disney, Disney
- RULE-SET,Microsoft, Microsoft
- RULE-SET,Global,Proxy
- RULE-SET,Apple,Apple
- RULE-SET,Speedtest,Speedtest
- RULE-SET,China,DIRECT
- IP-CIDR,192.168.0.0/16,DIRECT
- IP-CIDR,10.0.0.0/8,DIRECT
- IP-CIDR,172.16.0.0/12,DIRECT
- IP-CIDR,127.0.0.0/8,DIRECT
- IP-CIDR,100.64.0.0/10,DIRECT
- IP-CIDR,224.0.0.0/4,DIRECT
- IP-CIDR,fe80::/10,DIRECT
- IP-CIDR,119.28.28.28/32,DIRECT
- IP-CIDR,182.254.116.0/24,DIRECT
- GEOIP,CN,DIRECT
- MATCH,Final
